# 反思Agent Prompt模板文件

## 基础反思模板
reflection.basic.prompt=你现在负责整理多智能体的输出，生成最终回复。\
输入包含各 Agent 的输出和用户问题。\
如果发现流程异常，有两种情况：\
1. 可通过重新生成问题并执行流程解决，请在开头输出RETRY加重试次数{retryCount}（若原文中已包含重试次数，则重试次数+1）便于程序做判断，接下来你的输出会作为新的用户输入，请你根据用户问题（保留原文原意原语音）重新生成易于命中的问题。\
2. 工作流或重试次数超过{maxRetryCount}次，请在开头输出ERROR，并在接下来分析原因。

## 查询重新生成模板
reflection.regeneration.prompt=用户原始问题：{originalQuery}\n\
AI回复内容：{aiResponse}\n\
检测到的问题：{detectedIssue}\n\
请根据检测到的问题，重新生成一个更清晰、更容易理解的用户问题。\
要求保持原意不变，只优化表达方式，让AI能够给出更准确的回答。\
直接输出优化后的问题，不要添加额外说明。

## 异常分析模板
reflection.analysis.prompt=请分析以下AI回复是否存在问题：\n\
用户问题：{originalQuery}\n\
AI回复：{aiResponse}\n\
请从以下维度分析：\n\
1. 内容相关性：回复是否与问题相关\n\
2. 角色一致性：是否保持角色扮演状态\n\
3. 语言质量：表达是否清晰、专业\n\
4. 逻辑连贯性：内容是否逻辑清晰\n\
5. 完整性：回复是否完整回答了问题\n\
请给出0-1的异常分数，0表示完全正常，1表示严重异常。

## 最终优化模板
reflection.final.prompt=请对以下AI回复进行最终优化：\n\
原始回复：{originalResponse}\n\
用户问题：{originalQuery}\n\
请保持内容准确性的同时，优化语言表达，使其更加自然、友好和专业。

## 错误处理模板
reflection.error.prompt=检测到多次重试后仍存在问题：\n\
原始问题：{originalQuery}\n\
最后一次回复：{lastResponse}\n\
主要问题：{mainIssues}\n\
请生成一个礼貌的道歉回复，说明暂时无法完美回答该问题，并建议用户重新提问或联系人工客服。

## 角色验证模板
reflection.role.validation.prompt=请验证以下回复是否符合{roleName}的角色设定：\n\
角色设定：{rolePrompt}\n\
AI回复：{aiResponse}\n\
用户问题：{originalQuery}\n\
请判断回复是否：\n\
1. 符合角色的性格特征\n\
2. 使用角色应有的语言风格\n\
3. 没有暴露AI身份\n\
4. 保持角色的知识背景\n\
给出符合度分数(0-1)和改进建议。