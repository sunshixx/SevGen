# æ¶æ„è®¾è®¡æ–‡æ¡£
> é¢å‘ä¸ƒç‰›äº‘æ‹›è˜è¯„å®¡çš„æ¶æ„è¯´æ˜ä¸æ¨¡å—è§„æ ¼æ–‡æ¡£ã€‚æˆ‘ä»¬çš„å°ç»„ã€å°ä¸ƒç‰›ã€‘å·²å®Œæˆè®®é¢˜äºŒã€ŒAI è§’è‰²æ‰®æ¼”ç½‘ç«™ã€çš„ç«¯åˆ°ç«¯å®ç°ï¼Œæœ¬æ–‡ä»¶èšç„¦äºæ¶æ„ã€æ¨¡å—ä¸åˆ†å·¥ï¼Œä¾¿äºè¯„å®¡å¿«é€Ÿç†è§£ä¸éªŒè¯ã€‚

---

## ğŸ§­ ç›®å½•
- [äº§å“æ„¿æ™¯](#äº§å“æ„¿æ™¯)
- [é¡¹ç›®ç»¼è¿°](#é¡¹ç›®ç»¼è¿°)
- [ç³»ç»Ÿæ¶æ„æ€»è§ˆ](#ç³»ç»Ÿæ¶æ„æ€»è§ˆ)
- [æ¨¡å—ä¸è§„æ ¼](#æ¨¡å—ä¸è§„æ ¼)
  - [å‰ç«¯æ¨¡å—](#å‰ç«¯æ¨¡å—)
  - [åç«¯æ¨¡å—](#åç«¯æ¨¡å—)
  - [æ•°æ®ä¸èµ„æºæ¨¡å—](#æ•°æ®ä¸èµ„æºæ¨¡å—)
  - [AI ä¸ RAG æ¨¡å—](#ai-ä¸-rag-æ¨¡å—)
- [ç”¨æˆ·ä»·å€¼åˆ†æ](#ç”¨æˆ·ä»·å€¼åˆ†æè¯„å®¡)
  - [ä¸€ã€äº§å“ç›®æ ‡åˆç†æ€§](#ä¸€äº§å“ç›®æ ‡åˆç†æ€§)
  - [äºŒã€äº§å“è®¾è®¡åˆç†æ€§](#äºŒäº§å“è®¾è®¡åˆç†æ€§)
  - [ä¸‰ã€åŠŸèƒ½ä¸°å¯Œåº¦](#ä¸‰åŠŸèƒ½ä¸°å¯Œåº¦)
  - [å››ã€æ˜¯å¦ç¬¦åˆç”¨æˆ·éœ€æ±‚](#å››æ˜¯å¦ç¬¦åˆç”¨æˆ·éœ€æ±‚)
  - [âœ… ç»“è®º](#-ç»“è®º)
- [æ ¸å¿ƒä¸šåŠ¡æµç¨‹](#æ ¸å¿ƒä¸šåŠ¡æµç¨‹)
  - [ç™»å½•é‰´æƒæµç¨‹](#ç™»å½•é‰´æƒæµç¨‹)
  - [å•è§’è‰²å¯¹è¯æµç¨‹](#å•è§’è‰²å¯¹è¯æµç¨‹)
  - [ç¾¤èŠ/èŠå¤©å®¤æµç¨‹](#ç¾¤èŠèŠå¤©å®¤æµç¨‹)
- [æ•°æ®æ¨¡å‹ï¼ˆæ¦‚å¿µï¼‰](#æ•°æ®æ¨¡å‹æ¦‚å¿µ)
- [éåŠŸèƒ½æ€§è®¾è®¡](#éåŠŸèƒ½æ€§è®¾è®¡)
- [è´¨é‡ä¿éšœ](#è´¨é‡ä¿éšœ)
- [è¿è¡Œä¸äº¤ä»˜](#è¿è¡Œä¸äº¤ä»˜)
  - [åç«¯è¿è¡Œï¼ˆWindowsï¼‰](#åç«¯è¿è¡Œwindows)
  - [å‰ç«¯è¿è¡Œï¼ˆWindowsï¼‰](#å‰ç«¯è¿è¡Œwindows)
  - [æ„å»ºä¸æ‰“åŒ…](#æ„å»ºä¸æ‰“åŒ…)
- [å›¢é˜Ÿåˆ†å·¥ï¼ˆ3äººï¼‰](#å›¢é˜Ÿåˆ†å·¥3äºº)
- [æäº¤ç‰©ä¸è¯„å®¡æŒ‡å¼•](#æäº¤ç‰©ä¸è¯„å®¡æŒ‡å¼•)
- [ç›®å½•ç´¢å¼•ï¼ˆèŠ‚é€‰ï¼‰](#ç›®å½•ç´¢å¼•èŠ‚é€‰)
- [ç‰ˆæœ¬ä¿¡æ¯](#ç‰ˆæœ¬ä¿¡æ¯)

---

## ğŸ¯ äº§å“æ„¿æ™¯

### æ ¸å¿ƒç†å¿µï¼šæ·±åº¦ä¸å¹¿åº¦å¹¶é‡çš„AIè§’è‰²æ‰®æ¼”ç”Ÿæ€

**SevGen** é€šè¿‡ã€Œå•è§’è‰²èŠå¤©ã€ä¸ã€Œå¤šè§’è‰²èŠå¤©å®¤ã€ä¸¤å¤§æ ¸å¿ƒåŠŸèƒ½ï¼Œæ„å»ºäº†ä¸€ä¸ªå®Œæ•´çš„AIè§’è‰²æ‰®æ¼”äº§å“ç”Ÿæ€ï¼Œæ»¡è¶³ç”¨æˆ·ä»ä¸ªäººåŒ–æ·±åº¦æ¢ç´¢åˆ°ç¤¾ä¼šåŒ–ç¾¤ä½“æ™ºæ…§çš„å®Œæ•´éœ€æ±‚å…‰è°±ã€‚

### ğŸ”¹ åŠŸèƒ½ä¸€ï¼šå•è§’è‰²èŠå¤© â€”â€” æ·±åº¦ä¸“æ³¨çš„æè‡´ä½“éªŒ
**ä»·å€¼å®šä½**ï¼šæ·±åº¦ã€ä¸ªæ€§åŒ–ã€éšç§æ€§çš„ä¸€å¯¹ä¸€æ²‰æµ¸å¼å¯¹è¯

- **æ— å¹²æ‰°çš„æ·±åº¦æ±‚çŸ¥**ï¼šä¸"ç‰›é¡¿"ä¸“ç ”ç»å…¸åŠ›å­¦ï¼Œä¸"ç‹é˜³æ˜"æ¢è®¨å¿ƒå­¦ï¼Œæä¾›ä¸“æ³¨çš„å­¦ä¹ ç¯å¢ƒ
- **å¼ºçƒˆçš„æƒ…æ„Ÿå…±é¸£**ï¼šä¸"å“ˆåˆ©Â·æ³¢ç‰¹"åˆ†äº«ç§˜å¯†ï¼Œå‘"èå£«æ¯”äºš"å¯»æ±‚å»ºè®®ï¼Œå»ºç«‹ç‹¬ç‰¹çš„æƒ…æ„Ÿçº½å¸¦  
- **ä½é—¨æ§›è½»æ¾äº’åŠ¨**ï¼šæµç¨‹ç®€å•ã€ç›®æ ‡æ˜ç¡®ï¼Œé€‚åˆåˆæ¬¡ä½“éªŒå’Œè½»é‡çº§å¨±ä¹

### ğŸ”¹ åŠŸèƒ½äºŒï¼šå¤šè§’è‰²èŠå¤©å®¤ â€”â€” å¹¿åº¦ç¢°æ’çš„é«˜æ•ˆå¼•æ“
**ä»·å€¼å®šä½**ï¼šå¹¿åº¦ã€åŠ¨æ€åšå¼ˆã€ååŒæ•ˆç‡çš„å¤šç»´åº¦æ™ºæ…§ç¢°æ’

- **ä»å•ä¸€è§†è§’åˆ°å…¨å±€è§†é‡**ï¼š"å“²å­¦èŠå¤©å®¤"ä¸­è‹æ ¼æ‹‰åº•ã€æŸæ‹‰å›¾ã€å°¼é‡‡çš„è·¨æ—¶ç©ºè®ºæˆ˜ï¼Œæ‹“å®½æ€ç»´è¾¹ç•Œ
- **ä»é™æ€é—®ç­”åˆ°åŠ¨æ€æ¨¡æ‹Ÿ**ï¼š"å¼€å‘èŠå¤©å®¤"ä¸­äº§å“ç»ç†ã€å·¥ç¨‹å¸ˆçš„ç«‹åœºè®¨è®ºï¼Œé¢„è§é¡¹ç›®æŒ‘æˆ˜
- **ä»ä½æ•ˆé‡å¤åˆ°é«˜æ•ˆååŒ**ï¼šä¸€æ¬¡æ€§é›†æˆå¤šä¸“ä¸šè§†è§’ï¼Œæä¾›ç»“æ„åŒ–çš„"è™šæ‹Ÿè¯„å®¡"

### ğŸª åŠŸèƒ½äº’è¡¥æ€§ï¼šç›¸è¾…ç›¸æˆçš„äº§å“çŸ©é˜µ
- **éœ€è¦æ·±åº¦æ—¶** â†’ å•è§’è‰²èŠå¤©è¿›è¡Œä¸“æ³¨æ¢ç´¢
- **éœ€è¦å¹¿åº¦æ—¶** â†’ å¤šè§’è‰²èŠå¤©å®¤æ¿€å‘åˆ›æ–°æ€ç»´
- **è¦†ç›–å…¨è°±**ï¼šä»ä¸ªäººæƒ…æ„Ÿé™ªä¼´åˆ°ä¸“ä¸šå†³ç­–æ”¯æŒçš„å®Œæ•´æœåŠ¡é“¾æ¡

---

## ğŸ“Œ é¡¹ç›®ç»¼è¿°
- è®®é¢˜ï¼šå¼€å‘ä¸€ä¸ªåˆ©ç”¨ AI åšè§’è‰²æ‰®æ¼”çš„ç½‘ç«™ï¼Œæ”¯æŒè§’è‰²æœç´¢ã€æ–‡å­—/è¯­éŸ³èŠå¤©ã€å¤šè§’è‰²åä½œï¼ˆç¾¤èŠï¼‰ã€‚
- ç›®æ ‡ï¼šæä¾›æ²‰æµ¸å¼è§’è‰²æ‰®æ¼”ä½“éªŒï¼Œä¿è¯è§’è‰²ä¸€è‡´æ€§ã€å›å¤è´¨é‡ä¸ç¨³å®šæ€§ã€‚
- æŠ€æœ¯æ ˆï¼š
  - å‰ç«¯ï¼šVue 3 + Vite + TypeScript + Piniaï¼ˆçŠ¶æ€ï¼‰
  - åç«¯ï¼šJava 17 + Spring Boot +ï¼ˆæŒä¹…åŒ–/æ ¡éªŒ/æ—¥å¿—ç­‰ï¼‰
  - æ•°æ®åº“ï¼šMySQLï¼ˆè„šæœ¬ä½äº `src/main/resources/db/`ï¼‰
  - AI & RAGï¼šæç¤ºè¯ä¸è§’è‰²çŸ¥è¯†åº“ä½äº `src/main/resources/prompts/` ä¸ `src/main/resources/rag-documents/`
  - å®æ—¶ï¼šSSE æµå¼å“åº”ï¼ˆå‰ç«¯æ‰“å­—æœºæ•ˆæœï¼‰

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„æ€»è§ˆ

![ç³»ç»Ÿæ¶æ„æ€»è§ˆ](diagrams/system-architecture-new.svg)


æ¶æ„è¦ç‚¹ï¼š
- **ä¸‰å±‚åˆ†ç¦»æ¶æ„**ï¼šFrontendï¼ˆVue 3 + TypeScriptï¼‰ã€Backendï¼ˆSpring Boot + Java 17ï¼‰ã€Resourcesï¼ˆMySQL + çŸ¥è¯†åº“ï¼‰å®Œå…¨è§£è€¦ï¼Œé€šè¿‡æ ‡å‡†åŒ–æ¥å£é€šä¿¡ã€‚
- **å‰ç«¯ç»Ÿä¸€APIå±‚**ï¼šé€šè¿‡ Pinia çŠ¶æ€ç®¡ç†å’Œ API å°è£…å±‚å¤„ç† HTTP/SSE é€šä¿¡ï¼Œé›†æˆé‰´æƒã€é”™è¯¯å¤„ç†ã€Markdown æ¸²æŸ“ç­‰æ¨ªåˆ‡å…³æ³¨ç‚¹ã€‚
- **åç«¯è–„æ§åˆ¶å™¨è®¾è®¡**ï¼šControllers ä»…è´Ÿè´£å‚æ•°æ ¡éªŒå’Œå“åº”æ ¼å¼åŒ–ï¼Œæ ¸å¿ƒä¸šåŠ¡é€»è¾‘èšåˆåœ¨ Services å±‚ï¼ŒRepository å±‚ä¸“æ³¨æ•°æ®è®¿é—®ã€‚
- **èµ„æºæ–‡ä»¶åŒ–ç®¡ç†**ï¼š12ä¸ªAIè§’è‰²çš„RAGçŸ¥è¯†åº“ã€æç¤ºè¯æ¨¡æ¿ã€å®‰å…¨æ£€æµ‹é…ç½®å‡ä»¥é™æ€èµ„æºå½¢å¼ç®¡ç†ï¼Œæ”¯æŒçƒ­æ›´æ–°å’Œç‰ˆæœ¬æ§åˆ¶ã€‚
- **æµå¼å“åº”æœºåˆ¶**ï¼šé‡‡ç”¨ SSEï¼ˆServer-Sent Eventsï¼‰å®ç° AI å¯¹è¯çš„å®æ—¶æµå¼è¾“å‡ºï¼Œå‰ç«¯æ¸²æŸ“æ‰“å­—æœºæ•ˆæœï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚

---

## ğŸ§± æ¨¡å—ä¸è§„æ ¼

### å‰ç«¯æ¨¡å—
- ä½ç½®ï¼š`frontend/`
- å…³é”®ç›®å½•ï¼š
  - `src/views/`ï¼šé¡µé¢ï¼ˆ`Chat.vue`ã€`ChatRoom.vue`ã€`Home.vue`ã€`Login.vue`ã€`Profile.vue` ç­‰ï¼‰
  - `src/stores/`ï¼šçŠ¶æ€ï¼ˆ`auth.ts`ã€`chat.ts`ã€`chatStore.ts`ã€`role.ts`ï¼‰
  - `src/api/`ï¼šæ¥å£å°è£…ï¼ˆ`auth.ts`ã€`chat.ts`ã€`chatroom.ts`ã€`message.ts`ã€`role.ts`ï¼‰
  - `src/utils/`ï¼šå·¥å…·ï¼ˆ`request.ts`ã€`markdownUtils.ts`ã€`markdownWithHighlight.ts`ã€`dateUtils.ts`ï¼‰
  - `router/index.ts`ï¼šè·¯ç”±ä¸å®ˆå«
- è§„æ ¼è¦ç‚¹ï¼š
  - API ç»Ÿä¸€ç» `utils/request.ts` æ³¨å…¥ Token/é”™è¯¯å¤„ç†ï¼›è§†å›¾ä¸ç›´æ¥æ‹¼ URLã€‚
  - éœ€è¦ç™»å½•çš„è·¯ç”±ç”±å®ˆå«æ§åˆ¶ï¼Œæœªæˆæƒè·³è½¬ç™»å½•é¡µã€‚
  - Markdown æ”¯æŒä»£ç é«˜äº®ï¼›æ¶ˆæ¯æ—¶é—´æ ¼å¼åŒ–ç»Ÿä¸€ã€‚

### åç«¯æ¨¡å—
- ä½ç½®ï¼š`src/main/java/com/aichat/...`
- å¸¸è§åˆ†å±‚ï¼š
  - Controllerï¼šé‰´æƒã€å‚æ•°æ ¡éªŒã€è¿”å›ç»Ÿä¸€å“åº”
  - Serviceï¼šä¸šåŠ¡èšåˆï¼ˆæˆ¿é—´ã€è§’è‰²ã€æ¶ˆæ¯ã€æƒé™ã€SSE æµï¼‰
  - Repository/Mapperï¼šæ•°æ®è®¿é—®
  - Domain/DTO/VOï¼šå®ä½“ä¸ä¼ è¾“å¯¹è±¡
- API é¢å‘å¯¹è±¡ï¼ˆä¸å‰ç«¯ `api/*.ts` å¯¹åº”ï¼‰ï¼š
  - `/api/auth/*`ï¼šç™»å½•æ³¨å†Œã€ç”¨æˆ·ä¿¡æ¯
  - `/api/roles/*`ï¼šè§’è‰²æ£€ç´¢ä¸è¯¦æƒ…
  - `/api/chat/*`ã€`/api/messages/*`ï¼šä¼šè¯ä¸æ¶ˆæ¯
  - `/api/chatrooms/*`ï¼šèŠå¤©å®¤ä¸å¤šè§’è‰²åä½œ
- è§„æ ¼è¦ç‚¹ï¼š
  - ä½¿ç”¨æ ¡éªŒæ³¨è§£ï¼ˆå¦‚ `@Validated`ï¼‰ä¸ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼›
  - æ—¥å¿—è®°å½•å…³é”®é“¾è·¯ï¼Œé¿å…æ³„éœ²æ•æ„Ÿæ•°æ®ï¼›
  - æµå¼å“åº”é‡‡ç”¨ SSEï¼Œé•¿è¿æ¥è¶…æ—¶ä¸æ–­çº¿é‡è¿ç­–ç•¥åœ¨å‰ç«¯å®ç°ã€‚

### æ•°æ®ä¸èµ„æºæ¨¡å—
- é…ç½®ï¼š`src/main/resources/application.yml`ï¼ˆæ•°æ®åº“ã€ç«¯å£ã€CORS ç­‰ï¼‰
- SQLï¼š`src/main/resources/db/`ï¼ˆåˆå§‹åŒ–ä¸è¿ç§»è„šæœ¬ï¼Œå¦‚ `database_schema*.sql`ï¼‰
- æç¤ºè¯ï¼š`src/main/resources/prompts/`ï¼ˆå¦‚åæ€/è§’è‰²æç¤ºï¼‰
- RAGï¼š`src/main/resources/rag-documents/`ï¼ˆæŒ‰è§’è‰²åˆ†ç›®å½•çš„ç´ æï¼‰

### AI ä¸ RAG æ¨¡å—
- ç›®æ ‡ï¼šä¿è¯è§’è‰²ä¸€è‡´æ€§ä¸å†…å®¹è´¨é‡ï¼ˆåæ€/çº¦æŸï¼‰ï¼Œç»“åˆè§’è‰²çŸ¥è¯†åº“æå‡å‡†ç¡®æ€§ã€‚
- åšæ³•ï¼š
  - åŸºç¡€æç¤ºè¯å·¥ç¨‹ + è§’è‰²ç”»åƒ + åæ€æç¤ºè¯ï¼›
  - RAG æ–‡æ¡£ä¸ºæ¯ä¸ªè§’è‰²æä¾›èƒŒæ™¯çŸ¥è¯†ï¼Œä¾¿äºæ£€ç´¢ä¸æƒ…å¢ƒå¯¹é½ï¼›
  - æ•æ„Ÿ/å¼‚å¸¸å†…å®¹æ£€æµ‹ï¼ˆèº«ä»½æš´éœ²ã€æŠ€æœ¯æ³„éœ²ç­‰å…³é”®è¯é›†ä½äº `resources/anomaly-keywords/`ï¼‰ã€‚

---

## ğŸ“£ ç”¨æˆ·ä»·å€¼åˆ†æ

### ä¸€ã€äº§å“ç›®æ ‡åˆç†æ€§
- ç›®æ ‡å®šä½ï¼š
  - é¢å‘å¯¹çŸ¥è¯†å‹è§’è‰²ä¸ IP è§’è‰²æ„Ÿå…´è¶£çš„ç”¨æˆ·ï¼ˆå¦‚åäººã€å†å²äººç‰©ã€æ–‡å­¦/å½±è§†è§’è‰²ï¼‰ï¼Œæä¾›æ²‰æµ¸å¼å¯¹è¯ä¸å­¦ä¹ /å¨±ä¹çš„ç»“åˆä½“éªŒã€‚
  - æ”¯æŒä»å•è§’è‰²æ·±èŠåˆ°å¤šè§’è‰²ç¾¤èŠï¼ˆè§’è‰²é—´è§‚ç‚¹ç¢°æ’ã€åä½œè§£é¢˜ï¼‰ï¼Œå½¢æˆå·®å¼‚åŒ–ç©æ³•ã€‚
- åˆç†æ€§ä¾æ®ï¼š
  - è¡Œä¸šè¶‹åŠ¿ï¼šAI å¯¹è¯äº§å“å·²æ™®åŠï¼Œä½†ç¨³å®šé«˜è´¨çš„ã€Œè§’è‰²æ‰®æ¼” + çŸ¥è¯†æ”¯æ’‘ã€ä»æœ‰ç©ºé—´ï¼›RAG+æç¤ºå·¥ç¨‹å¯æ˜¾è‘—æå‡è§’è‰²ä¸€è‡´æ€§ä¸ä¸“ä¸šåº¦ã€‚
  - è®®é¢˜å¥‘åˆï¼šå®Œå…¨å¥‘åˆè®®é¢˜äºŒè¦æ±‚ï¼ˆè§’è‰²æ£€ç´¢ã€è§’è‰²æ‰®æ¼”ã€å¯è¯­éŸ³/æ–‡æœ¬äº¤äº’ã€ç½‘ç«™å½¢æ€ï¼‰ã€‚
- ç›®æ ‡æ‹†è§£ï¼š
  1) ä½é—¨æ§›ä½“éªŒï¼šè´¦å·æ³¨å†Œ/ç™»å½•åå³å¯é€‰æ‹©è§’è‰²å¼€èŠï¼›
  2) é«˜è´¨é‡è§’è‰²è¿˜åŸï¼šé€šè¿‡ prompts ä¸ RAG ç´ æå¼ºåŒ–è§’è‰²è®¾å®šä¸çŸ¥è¯†è¾¹ç•Œï¼›
  3) å¤šè§’è‰²åä½œï¼šèŠå¤©å®¤å†…å¤šä¸ªè§’è‰²åŒæ—¶å‚ä¸ï¼Œæå‡å¯ç©æ€§ä¸åœºæ™¯ä¸°å¯Œåº¦ï¼›
  4) å®æ—¶ä½“éªŒï¼šSSE æµå¼è¾“å‡ºï¼Œé™ä½ç­‰å¾…ç„¦è™‘ï¼Œæ¥è¿‘å¯¹è¯â€œæ‰“å­—æœºâ€ä½“éªŒã€‚

### äºŒã€äº§å“è®¾è®¡åˆç†æ€§
- ä¿¡æ¯æ¶æ„ï¼ˆIAï¼‰ï¼š
  - ç™»å½•/æ³¨å†Œ â†’ ä¸»é¡µï¼ˆè§’è‰²æµè§ˆ/æ£€ç´¢ï¼‰â†’ å•èŠï¼ˆChatï¼‰â†’ ç¾¤èŠï¼ˆChatRoom/Detailï¼‰â†’ ç”¨æˆ·ä¸­å¿ƒï¼ˆProfileï¼‰ã€‚
  - å‰ç«¯è·¯ç”±æ¸…æ™°ï¼Œç™»å½•æ€ç”±çŠ¶æ€ç®¡ç†æ§åˆ¶å—é™é¡µé¢è®¿é—®ï¼Œé¿å…æ— æ•ˆè·³è½¬ä¸ 401 æŠ–åŠ¨ã€‚
- äº¤äº’ä¸ä½“éªŒï¼š
  - æµå¼å“åº”ï¼ˆSSEï¼‰å‘ˆç°é€å­—è¾“å‡ºï¼Œæ˜¾è‘—ä¼˜åŒ–ç­‰å¾…ä½“éªŒï¼›
  - Markdown + ä»£ç é«˜äº®ï¼Œä¾¿äºçŸ¥è¯†å‹æˆ–æŠ€æœ¯å‹è§’è‰²è¾“å‡ºç»“æ„åŒ–å†…å®¹ï¼›
  - æ—¶é—´æ˜¾ç¤ºç»Ÿä¸€æ ¼å¼åŒ–ï¼Œæ¶ˆæ¯åˆ—è¡¨æ»šåŠ¨ä¸ç©ºæ€/é”™è¯¯æç¤ºå¯è¯»æ€§è¾ƒå¥½ï¼ˆä» utils ä¸ views ç»“æ„æ¨æ–­ï¼‰ã€‚
- ä¸€è‡´æ€§ä¸è´¨é‡ä¿è¯ï¼š
  - åŸºäº prompts ä¸è§’è‰² RAG æ–‡æ¡£ï¼Œé™åˆ¶æ¨¡å‹é£æ ¼ä¸çŸ¥è¯†èŒƒå›´ï¼Œæå‡è§’è‰²ä¸€è‡´æ€§ï¼›
  - èµ„æºå±‚å…·å¤‡å¼‚å¸¸å…³é”®è¯åº“ï¼ˆanomaly-keywordsï¼‰ï¼Œç”¨äºè‡ªæ£€/æé†’ï¼ˆèº«ä»½æš´éœ²ã€æŠ€æœ¯æ³„éœ²ã€è§’è‰²ç ´æ ¼ï¼‰ã€‚
- æ¶æ„åˆç†æ€§ï¼š
  - å‰åç«¯åˆ†ç¦»ï¼Œå‰ç«¯ç»Ÿä¸€è¯·æ±‚å°è£…ä¸é‰´æƒï¼›
  - åç«¯åˆ†å±‚æ¸…æ™°ï¼ˆController/Service/Repository + èµ„æºå±‚ï¼‰ï¼Œå¯ç»´æŠ¤ä¸å¯æ‰©å±•æ€§è‰¯å¥½ï¼›
  - SQL è„šæœ¬åˆ†ç¦»ï¼Œèµ„æºï¼ˆpromptsã€rag-documentsï¼‰ç‹¬ç«‹å¯è¿­ä»£ã€‚

### ä¸‰ã€åŠŸèƒ½ä¸°å¯Œåº¦
- è´¦å·ä¸æƒé™ï¼š
  - ç™»å½•/æ³¨å†Œã€é‰´æƒçŠ¶æ€æŒä¹…åŒ–ä¸è·¯ç”±å®ˆå«ï¼Œæ”¯æŒç”¨æˆ·ä¸­å¿ƒï¼ˆProfileï¼‰ã€‚
- è§’è‰²èƒ½åŠ›ï¼š
  - è§’è‰²åˆ—è¡¨/æ£€ç´¢ï¼ˆå‰ç«¯ api/role.tsï¼Œèµ„æº rag-documents/ æŒ‰è§’è‰²åˆ†é—¨ç±»ï¼‰ï¼Œå¤´åƒç´ æä¸æ–‡æ¡£æ”¯æ’‘ï¼›
  - è§’è‰²è¯¦æƒ…ä¸è¿›å…¥å¯¹è¯ï¼ˆè§†å›¾ Home/Chat/ChatRoom*ï¼‰ã€‚
- å¯¹è¯èƒ½åŠ›ï¼š
  - å•è§’è‰²å¯¹è¯ï¼ˆChat.vueï¼‰ï¼›
  - èŠå¤©å®¤/ç¾¤èŠï¼ˆChatRoom.vueã€ChatRoomDetail.vueï¼‰ï¼Œå¤šè§’è‰²å¹¶å‘å“åº”ï¼›
  - SSE æµå¼å±•ç¤ºï¼ˆæ›´å¥½çš„å®æ—¶åé¦ˆï¼‰ã€‚
- æ¶ˆæ¯ä¸å±•ç¤ºï¼š
  - å†å²æ¶ˆæ¯åŠ è½½ã€Markdown æ¸²æŸ“ä¸ä»£ç é«˜äº®ï¼›
  - ç»Ÿä¸€æ—¶é—´æ ¼å¼ä¸åŸºç¡€é”™è¯¯å¤„ç†ï¼ˆutilsï¼‰ã€‚
- èµ„æºä¸è´¨é‡ï¼š
  - prompts/ ä¸ rag-documents/ æä¾›ä¸°å¯Œè§’è‰²è¯­æ–™ï¼›
  - anomaly-keywords/ è¿›è¡Œå†…å®¹å¼‚å¸¸çš„å…³é”®è¯è¾…åŠ©æ£€æµ‹ã€‚

### å››ã€æ˜¯å¦ç¬¦åˆç”¨æˆ·éœ€æ±‚
- ç”¨æˆ·ç”»åƒ Aï¼šè§’è‰²ç²‰ä¸/æ³›å¨±ä¹ç”¨æˆ·
  - éœ€æ±‚ï¼šè½»æ¾ä¸å–œæ¬¢çš„è§’è‰²äº’åŠ¨ã€è¾“å‡ºâ€œåƒä»–/å¥¹ä¼šè¯´çš„è¯â€ã€‚
  - æ»¡è¶³ç‚¹ï¼šè§’è‰²æ£€ç´¢ â†’ å•èŠ/ç¾¤èŠ â†’ æµå¼è¾“å‡ºï¼Œè§’è‰²ä¸€è‡´æ€§ç”± prompts+RAG ä¿éšœã€‚
- ç”¨æˆ·ç”»åƒ Bï¼šå­¦ä¹ è€…/çŸ¥è¯†å‹ç”¨æˆ·
  - éœ€æ±‚ï¼šå‘åäºº/ä¸“å®¶å‹è§’è‰²æé—®ï¼Œè·å¾—ç»“æ„åŒ–ã€å¯è¯»çš„çŸ¥è¯†å›å¤ã€‚
  - æ»¡è¶³ç‚¹ï¼šMarkdown+é«˜äº®ï¼ŒRAG æ”¯æ’‘çš„ä¸“ä¸šå›ç­”ï¼›å¯å¼•å…¥å¤šè§’è‰²è¿›è¡Œæ­£åè¾©è®ºæˆ–å¤šè§†è§’è§£æã€‚
- ç”¨æˆ·ç”»åƒ Cï¼šåˆ›ä½œ/äº§å“åŸå‹éªŒè¯è€…
  - éœ€æ±‚ï¼šæŠŠå¤šè§’è‰²å½“ä½œå¤´è„‘é£æš´â€œæ­å­â€ï¼Œå¿«é€Ÿå¾—åˆ°çµæ„Ÿæˆ–è‰æ¡ˆã€‚
  - æ»¡è¶³ç‚¹ï¼šèŠå¤©å®¤å¹¶å‘è§’è‰²å“åº”ï¼Œè§‚ç‚¹æ±‡èšæ›´é«˜æ•ˆã€‚

åœºæ™¯è¦†ç›–ä¸åˆç†æ€§ï¼š
- æ–°æ‰‹è·¯å¾„æ¸…æ™°ï¼šæ³¨å†Œâ†’é€‰è§’â†’å¼€èŠï¼›
- æ ¸å¿ƒé“¾è·¯å®Œæ•´ï¼šå•èŠ/ç¾¤èŠ/å†å²æ¶ˆæ¯ï¼›
- å†…å®¹å¯æ§ï¼šå¼‚å¸¸å…³é”®è¯ã€æç¤ºè¯çº¦æŸï¼Œé™ä½è¶Šç•Œé£é™©ï¼›
- å¯æ‰©å±•ï¼šå¯æŒ‰ç”¨æˆ·åé¦ˆå¼•å…¥è¯­éŸ³ã€æ”¶è—/åˆ†äº«å¯¹è¯ã€è§’è‰²è®¢é˜…ç­‰å¢å€¼åŠŸèƒ½ã€‚


### âœ… ç»“è®º
- ç›®æ ‡åˆç†ï¼šç´§è´´è®®é¢˜ä¸ç”¨æˆ·ä»·å€¼ï¼Œå¼ºè°ƒâ€œè§’è‰²ä¸€è‡´æ€§ + å¯ç©æ€§ + å­¦ä¹ æ€§â€ã€‚
- è®¾è®¡åˆç†ï¼šä¿¡æ¯æ¶æ„æ˜ç¡®ã€æµå¼äº¤äº’é¡ºæ»‘ã€è´¨é‡æœ‰æœºåˆ¶ä¿éšœï¼ˆprompts+RAG+å…³é”®è¯ï¼‰ã€‚
- åŠŸèƒ½å……è¶³ï¼šè´¦å·/è§’è‰²/å•èŠ/ç¾¤èŠ/å†å²/Markdown/èµ„æºæ”¯æ’‘ï¼Œå½¢æˆå¯éªŒè¯çš„æœ€å°å¯ç”¨é—­ç¯ï¼ˆMVP+ï¼‰ã€‚
- éœ€æ±‚åŒ¹é…ï¼šè¦†ç›–å¨±ä¹/å­¦ä¹ /åˆ›ä½œä¸‰ç±»ç”»åƒï¼Œå…·å¤‡å‘è¯­éŸ³ã€æ”¶è—ã€åˆ†äº«ã€è®¢é˜…ç­‰æ–¹å‘æ‰©å±•çš„æ½œåŠ›ã€‚

---

## ğŸ”„ æ ¸å¿ƒä¸šåŠ¡æµç¨‹

![ç™»å½•é‰´æƒæµç¨‹](./system-architecture-new.svg)
### ç™»å½•é‰´æƒæµç¨‹

>  ![æŸ¥çœ‹SVGåŸå›¾](./login-sequence-new.svg)

### å•è§’è‰²å¯¹è¯æµç¨‹

![å•è§’è‰²å¯¹è¯æµç¨‹](./single-chat-sequence.svg)


### ç¾¤èŠ/èŠå¤©å®¤æµç¨‹

![ç¾¤èŠæµç¨‹](./chatroom-sequence.svg)


---

## ğŸ—ƒï¸ æ•°æ®æ¨¡å‹ï¼ˆæ¦‚å¿µï¼‰
- ç”¨æˆ· Userï¼š`id, username, email, passwordHash, avatar, createdAt ...`
- è§’è‰² Roleï¼š`id, name, description, avatar, prompts, category, isPublic ...`
- ä¼šè¯ Chat/ChatRoomï¼š`id, userId, roleId/chatRoomId, title, isActive ...`
- æ¶ˆæ¯ Messageï¼š`id, chatId/chatRoomId, sender(user/ai), roleId, content, createdAt ...`
- è¯´æ˜ï¼šä»¥ `resources/db/` ä¸­çš„ SQL ä¸ºå‡†ï¼›éƒ¨åˆ†ç¯å¢ƒä¸‹å­˜åœ¨ç®€åŒ–/å®Œæ•´ä¸¤å¥— schemaï¼ˆ`database_schema_simple.sql` / `database_schema_complete.sql`ï¼‰ã€‚

---

## ğŸ” éåŠŸèƒ½æ€§è®¾è®¡
- å®‰å…¨ï¼š
  - å‰ç«¯ä»…ä»¥å—æ§æ–¹å¼æŒä¹…åŒ– Tokenï¼›
  - åç«¯å¯¹å—é™æ¥å£åšé‰´æƒä¸å‚æ•°æ ¡éªŒï¼›
  - æ—¥å¿—ä¸æ‰“å°æ•æ„Ÿä¿¡æ¯ï¼›
  - å…³é”®å­—è¿‡æ»¤ä¸åˆè§„æç¤ºï¼ˆ`resources/anomaly-keywords/`ï¼‰ã€‚
- æ€§èƒ½ä¸æ‰©å±•ï¼š
  - å‰ç«¯æ‡’åŠ è½½ä¸æœ€å°åŒ–è¯·æ±‚ï¼›
  - åç«¯æœåŠ¡å±‚æ— çŠ¶æ€ï¼Œå¯æ°´å¹³æ‰©å±•ï¼›
  - å¯å¼•å…¥ç¼“å­˜ï¼ˆå¦‚ Redisï¼‰ä¼˜åŒ–çƒ­é—¨è§’è‰²ä¸æˆ¿é—´åˆ—è¡¨ã€‚
- ç¨³å®šæ€§ï¼š
  - æµå¼è¶…æ—¶ä¸æ–­çº¿é‡è¿ï¼›
  - æœåŠ¡å¼‚å¸¸çš„é™çº§ä¸é”™è¯¯æç¤ºï¼›
  - æ•°æ®åº“è¿ç§»è„šæœ¬å¹‚ç­‰æ‰§è¡Œã€‚

---

## ğŸ§ª è´¨é‡ä¿éšœ
- ä»£ç è§„èŒƒï¼šTypeScript ä¸¥æ ¼æ¨¡å¼ï¼›Java éµå¾ªç»Ÿä¸€æ£€æŸ¥è§„èŒƒã€‚
- å•å…ƒ/é›†æˆæµ‹è¯•ï¼šåç«¯åœ¨ `src/test/java`ï¼›å‰ç«¯å¯ç»“åˆ `vitest`ï¼ˆå¯é€‰ï¼‰ã€‚
- æ¥å£å¥‘çº¦ï¼šå‰ç«¯é€šè¿‡ `api/*.ts` å°è£…ï¼Œé¿å…æ•£è½çš„ URL ä¸é‡å¤é€»è¾‘ã€‚
- å¯è§‚æµ‹æ€§ï¼šå…³é”®è·¯å¾„æ‰“æ—¥å¿—ï¼Œå®šä½é—®é¢˜å¿«é€Ÿå›æº¯ã€‚

---

## ğŸš€ è¿è¡Œä¸äº¤ä»˜

### åç«¯å¯åŠ¨
```bash
# å…‹éš†é¡¹ç›®
git clone [repository-url]
cd SevGen

# é…ç½®æ•°æ®åº“
# 1. åˆ›å»ºæ•°æ®åº“: qiniuyun
# 2. å¯¼å…¥SQLæ–‡ä»¶: src/main/resources/sql/init_database.sql
# 3. ä¿®æ”¹é…ç½®: src/main/resources/application.yml

# å¯åŠ¨åç«¯æœåŠ¡
mvn clean install
mvn spring-boot:run
```

### å‰ç«¯å¯åŠ¨
```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```


### è®¿é—®åº”ç”¨
- **å‰ç«¯åœ°å€**: http://localhost:5173
- **åç«¯API**: http://localhost:16999
- **APIæ–‡æ¡£**: http://localhost:16999/swagger-ui.html


## ğŸ‘¥ å›¢é˜Ÿåˆ†å·¥ï¼ˆ3äººï¼‰
- æˆå‘˜ å­™ä»•å‹‹
  - è´Ÿè´£ä¿¡æ¯æ¶æ„ã€è§†å›¾æ­å»ºã€çŠ¶æ€ç®¡ç†ã€é‰´æƒä¸æ¥å£è”è°ƒï¼›
  - ä¸»è¦ç›®å½•ï¼š`frontend/views`ã€`frontend/stores`ã€`frontend/api`ã€`frontend/utils`ã€‚
- æˆå‘˜ èƒ¡å…´å¹¿
  - è´Ÿè´£æ¥å£è®¾è®¡ã€æœåŠ¡å±‚å®ç°ã€æ•°æ®åº“è„šæœ¬ã€SSE æµä¸æ—¥å¿—/å¼‚å¸¸å¤„ç†ï¼›
  - ä¸»è¦ç›®å½•ï¼š`src/main/java/...`ã€`src/main/resources/db`ã€`src/main/resources/application.yml`ã€‚
- æˆå‘˜ ææ³½ç”«
  - è´Ÿè´£æç¤ºè¯ä¸ RAG ç´ æç®¡ç†ã€è´¨é‡æ£€æµ‹ä¸åæ€ã€æ„å»ºä¸éƒ¨ç½²æ–‡æ¡£ã€æ¼”ç¤ºç¯å¢ƒï¼›
  - ä¸»è¦ç›®å½•ï¼š`src/main/resources/prompts`ã€`src/main/resources/rag-documents`ã€æµ‹è¯•/è„šæœ¬ä¸æ¼”ç¤ºæ•°æ®ã€‚

---

## âœ… æäº¤ç‰©ä¸è¯„å®¡æŒ‡å¼•
- æäº¤ç‰©ï¼ˆä¸è¯„å®¡è¦æ±‚å¯¹é½ï¼‰ï¼š
  1) å…¨éƒ¨æºä»£ç ï¼ˆå‰åç«¯åˆ†ç¦»ï¼‰ï¼›
  2) è¿è¡Œè¯´æ˜ï¼ˆæœ¬èŠ‚ï¼‰ä¸ç¯å¢ƒé…ç½®ï¼ˆ`application.yml` ç¤ºä¾‹ï¼‰ï¼›
  3) æ¶æ„è®¾è®¡æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ + `src/main/resources/æ¶æ„è®¾è®¡æ–‡æ¡£.md`ï¼‰ï¼›
  4) æ¨¡å—è§„æ ¼ä¸åˆ†å·¥ï¼ˆè§ä¸Šæ–‡ã€Œæ¨¡å—ä¸è§„æ ¼ã€ã€Œå›¢é˜Ÿåˆ†å·¥ã€ï¼‰ï¼›
  5) Demo è§†é¢‘ï¼ˆå±•ç¤ºç™»å½•ã€å•è§’è‰²æƒ…æ™¯ã€ç¾¤èŠæµå¼äº¤äº’ã€æ¶ˆæ¯å†å²ç­‰ï¼‰ã€‚
- è¯„å®¡å»ºè®®è·¯å¾„ï¼š
  - å…ˆè¯»æœ¬æ–‡ä»¶ï¼›
  - æŒ‰ã€Œè¿è¡Œä¸äº¤ä»˜ã€å¿«é€Ÿå¯åŠ¨ï¼›
  - é€šè¿‡å‰ç«¯ `Chat.vue` ä¸ `ChatRoom.vue` ä½“éªŒå•èŠ/ç¾¤èŠï¼›
  - æŸ¥é˜… `resources/prompts` ä¸ `rag-documents` äº†è§£è§’è‰²çŸ¥è¯†ä¸æç¤ºå·¥ç¨‹ï¼›
  - æŸ¥çœ‹ `resources/db` äº†è§£æ•°æ®æ¨¡å‹è„šæœ¬ï¼›
  - å¦‚éœ€æ›´å¤šç»†èŠ‚ï¼Œå¯è¿›ä¸€æ­¥é˜…è¯» `frontend/api/*.ts` ä¸åç«¯æ§åˆ¶å™¨/æœåŠ¡å®ç°ã€‚

---

## ğŸ“ ç›®å½•ç´¢å¼•ï¼ˆèŠ‚é€‰ï¼‰
- åç«¯èµ„æºï¼š
  - `src/main/resources/application.yml`
  - `src/main/resources/db/*.sql`
  - `src/main/resources/prompts/*`
  - `src/main/resources/rag-documents/*`
  - `src/main/resources/anomaly-keywords/*`
- å‰ç«¯æ ¸å¿ƒï¼š
  - `frontend/src/views/*`
  - `frontend/src/stores/*`
  - `frontend/src/api/*`
  - `frontend/src/utils/*`
  - `frontend/vite.config.ts`

---

## ğŸ—“ï¸ ç‰ˆæœ¬ä¿¡æ¯
- æ–‡æ¡£ï¼šarchitecture-design-qiniu.mdï¼ˆæœ¬æ–‡ä»¶ï¼‰
- ç‰ˆæœ¬ï¼šv1.0ï¼ˆæŠ•é€’ç‰ˆï¼‰
- æ›´æ–°æ—¥æœŸï¼š2025-09-28
